import { jsxs, Fragment, jsx } from "react/jsx-runtime";
import Script from "next/script";
import { draftMode } from "next/headers";
import { useRouter } from "next/router";
import { PrismicPreviewClient } from "./PrismicPreviewClient.js";
import { getToolbarSrc } from './_node_modules/@prismicio/client/dist/getToolbarSrc.js';
function PrismicPreview({ repositoryName, children, ...props }) {
  const toolbarSrc = getToolbarSrc(repositoryName);
  let isDraftMode = false;
  const result = jsxs(Fragment, { children: [children, jsx(PrismicPreviewClient, { repositoryName, isDraftMode, ...props }), jsx(Script, { src: toolbarSrc, strategy: "lazyOnload" })] });
  let isAppRouter = true;
  try {
    useRouter();
    isAppRouter = false;
  } catch {
  }
  if (isAppRouter) {
    return new Promise(async (res) => {
      isDraftMode = (await draftMode()).isEnabled;
      res(result);
    });
  }
  return result;
}
export {
  PrismicPreview
};
//# sourceMappingURL=PrismicPreview.js.map
