"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{26137:function(e,n,r){r.d(n,{F:function(){return Y}});var t=r(52322),a=r(37577),l=r(97729),s=r.n(l),i=r(2784),c=r(42770),o=r(16991),u=r(64837),d=r(43451),h=r(22710),x=r(62230),p=r(85244),f=r(99267),m=r(5632),j=r(56580),g=r(75289),v=r(65563),b=r(88932),y=r(12189),C=r(84562);function S(){return(S=(0,h.Z)(function(e){var n,r,t,a,l,s,i,c,o,d;return(0,f.__generator)(this,function(h){switch(h.label){case 0:n=e.id,r=e.label,t=e.repeatable,a=e.format,l=e.onSuccess,s=u.$[a],i=(0,v.Ue)({id:n,label:r,repeatable:t,format:a}),h.label=1;case 1:return h.trys.push([1,4,,5]),[4,(0,y.KA)(i)];case 2:if((c=h.sent().errors).length>0)throw c;return y.Xe.track({event:"custom-type:created",id:i.id,name:r,format:a,type:t?"repeatable":"single",origin:"table"}),[4,l(i)];case 3:return h.sent(),b.Am.success((0,C.GX)({message:"".concat(s.name({start:!0,plural:!1})," saved successfully at "),path:"./customtypes/".concat(i.id,"/index.json")})),[3,5];case 4:return o=h.sent(),d="Internal Error: ".concat(s.name({start:!0,plural:!1})," not saved"),console.error(d,o),b.Am.error(d),[3,5];case 5:return[2]}})})).apply(this,arguments)}var w=r(99526),k=r(35393),Z=r(4995),T=r(25978),I=r(55197),_=r(7781),R=r(7342),z=r(44570),L=r(17064),N=r(63397),A=r(98240),D=function(e){var n=e.selected,r=(0,A.Z)(e,["selected"]);return(0,t.jsx)(g.kC,(0,x.Z)({sx:{p:"24px",mb:3,alignItems:"top",cursor:"pointer",borderRadius:"6px",backgroundColor:"grayLight",boxShadow:n?function(e){var n;return"0 0 0 2px ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.primary))}:"none","&:hover":{boxShadow:function(e){var n;return"0 0 0 2px ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.primary))}}}},r))},O=function(e){var n=e.format,r=(0,L.Z)((0,N.U$)("repeatable"),3),a=r[0],l=r[2],s=u.$[n];return(0,t.jsxs)(g.xu,{mb:2,children:[(0,t.jsxs)(D,{selected:a.value,onClick:function(){return l.setValue(!0)},children:[(0,t.jsx)(g.Y8,{checked:a.value,onChange:function(){},"data-testid":"repeatable-type-radio-btn"}),(0,t.jsxs)(g.xu,{sx:{marginLeft:2},children:["Reusable type",(0,t.jsx)(g.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:s.hintRepeatable})]})]}),(0,t.jsxs)(D,{selected:!a.value,onClick:function(){return l.setValue(!1)},children:[(0,t.jsx)(g.Y8,{checked:!a.value,onChange:function(){},"data-testid":"single-type-radio-btn"}),(0,t.jsxs)(g.xu,{sx:{marginLeft:2},children:["Single type",(0,t.jsx)(g.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:s.hintSingle})]})]})]})},B=function(e){var n,r=e.format,a=e.isCreating,l=e.isOpen,s=e.origin,c=void 0===s?"table":s,o=e.onCreateChange,d=e.onOpenChange,b=(0,R.Z)().createCustomTypeSuccess,y=(0,j.v9)(function(e){return{customTypeIds:(0,_.W6)(e),customTypeLabels:(0,_.YS)(e)}}),C=y.customTypeIds,L=y.customTypeLabels,N=u.$[r],A=(0,i.useState)(!0),D=A[0],B=A[1],E=(0,k.g)().syncChanges,P=(0,m.useRouter)(),V=(n=(0,h.Z)(function(e){var n,t,a;return(0,f.__generator)(this,function(l){switch(l.label){case 0:var s;return n=e.id,t=e.label,a=e.repeatable,o(!0),[4,function(e){return S.apply(this,arguments)}({format:r,id:n,label:t,origin:c,repeatable:a,onSuccess:(s=(0,h.Z)(function(e){var r,t;return(0,f.__generator)(this,function(a){switch(a.label){case 0:return b(e),r=(0,v.y6)(e),t=w.cd[r],B(!0),[4,P.push({pathname:t.getBuilderPagePathname(n)})];case 1:return a.sent(),E(),[2]}})}),function(e){return s.apply(this,arguments)})})];case 1:return l.sent(),o(!1),d(!1),[2]}})}),function(e){return n.apply(this,arguments)}),$=function(e,n,r){r(D?(0,p.Z)((0,x.Z)({},n),{label:e.target.value,id:(0,I.lV)(e.target.value)}):(0,p.Z)((0,x.Z)({},n),{label:e.target.value}))},F=function(e,n){n("id",e.target.value),B(!1)};return(0,t.jsx)(Z.Z,{testId:"create-ct-modal",isOpen:l,widthInPx:"530px",formId:"create-custom-type",buttonLabel:"Create",close:function(){d(!1),B(!0)},onSubmit:function(e){V(e)},isLoading:a,initialValues:{repeatable:!0,id:"",label:""},validate:function(e){var n=e.id,r=e.label,t={};return r&&r.length||(t.label="Cannot be empty."),!t.label&&L.includes(r)&&(t.label="".concat(N.name({start:!0,plural:!1})," name is already taken.")),n&&n.length||(t.id="ID cannot be empty."),t.id||!n||T.xo.exec(n)||(t.id="Invalid id: No special characters allowed."),!t.id&&n&&C.map(function(e){return e.toLowerCase()}).includes(n)&&(t.id='ID "'.concat(n,'" exists already.')),Object.keys(t).length>0?t:void 0},content:{title:"Create a new ".concat(N.name({start:!1,plural:!1}))},children:function(e){var n=e.errors,a=e.setValues,l=e.setFieldValue,s=e.values,i=e.touched;return(0,t.jsxs)(g.xu,{children:[(0,t.jsx)(O,{format:r}),(0,t.jsx)(z.W,{name:"label",label:"".concat(N.name({start:!0,plural:!1})," Name"),testId:"ct-name-input",placeholder:"A display name for the ".concat(N.name({start:!1,plural:!1})),error:i.label?n.label:void 0,onChange:function(e){return $(e,s,a)}}),(0,t.jsx)(z.W,{name:"id",testId:"ct-id-input",label:"".concat(N.name({start:!0,plural:!1})," ID"),placeholder:N.inputPlaceholder,error:i.id?n.id:void 0,onChange:function(e){return F(e,l)}})]})}})},E=r(9502),P=function(e){return(0,t.jsxs)("svg",(0,p.Z)((0,x.Z)({viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,t.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf"}),(0,t.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc"}),(0,t.jsx)("path",{d:"m10.0912 8c-2.8118 0-5.0912 2.2794-5.0912 5.0912s2.2794 5.0912 5.0912 5.0912c1.8851 0 3.5303-1.0247 4.4098-2.5452.1553-.2684.2868-.5523.3916-.8489.092-.2604-.0444-.5461-.3048-.6381-.2603-.092-.546.0445-.638.3048-.0841.238-.1897.4659-.3144.6815-.7081 1.2241-2.0305 2.0459-3.5442 2.0459-2.2595 0-4.0912-1.8317-4.0912-4.0912s1.8317-4.0912 4.0912-4.0912c1.3566 0 2.5595.66 3.3043 1.6782h-1.7739c-.2761 0-.5.2239-.5.5 0 .2762.2239.5.5.5h2.6782c.2762 0 .5-.2238.5-.5v-2.6782c0-.2761-.2238-.5-.5-.5-.2761 0-.5.2239-.5.5v1.1032c-.9281-.9865-2.2462-1.6032-3.7086-1.6032z",fill:"#fff"})]}))},V=function(e){return(0,t.jsxs)("svg",(0,p.Z)((0,x.Z)({viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,t.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf",fillRule:"nonzero"}),(0,t.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc",fillRule:"nonzero"}),(0,t.jsx)("path",{d:"m8.0869 10.6818.5758-2.3031c.0556-.2226.2556-.3787.485-.3787.3253 0 .564.3057.4851.6213l-.5151 2.0605h2.6055l.5758-2.3031c.0557-.2226.2557-.3787.4851-.3787.3253 0 .564.3057.4851.6213l-.5152 2.0605h2.246c.2761 0 .5.2239.5.5 0 .2762-.2239.5-.5.5h-2.496l-.6591 2.6364h2.1551c.2761 0 .5.2238.5.5 0 .2761-.2239.5-.5.5h-2.4051l-.5757 2.3031c-.0557.2226-.2557.3787-.4851.3787-.3253 0-.564-.3057-.4851-.6213l.5152-2.0605h-2.6056l-.5758 2.3031c-.0556.2226-.2556.3787-.4851.3787-.3253 0-.5639-.3057-.485-.6213l.5151-2.0605h-1.9278c-.2761 0-.5-.2239-.5-.5 0-.2762.2239-.5.5-.5h2.1778l.6591-2.6364h-1.8369c-.2761 0-.5-.2238-.5-.5 0-.2761.2239-.5.5-.5zm2.7273 3.6364.659-2.6364h-2.6055l-.6591 2.6364z",fill:"#fff"})]}))},$=r(56471),F=r(18566),M=r(33476),W=r(93290),H=r(7604);function q(e){return G.apply(this,arguments)}function G(){return(G=(0,h.Z)(function(e){var n,r,t;return(0,f.__generator)(this,function(a){switch(a.label){case 0:return[4,H.j.customTypes.readAllCustomTypes({format:e})];case 1:if(r=(n=a.sent()).errors,t=n.models,r.length>0)throw r;return[2,t.map(function(e){return e.model})]}})})).apply(this,arguments)}var K=function(e){var n,r,l,s,c,o,d=e.format,h=e.isCreatingCustomType,x=e.openCreateCustomTypeModal,p=(0,m.useRouter)(),f=(r=(0,i.useCallback)(function(e){return(0,F.VA)(q,[d],e)},[d]),{customTypes:(0,F.QT)(q,[d]),updateCustomTypes:r}),g=f.customTypes,v=f.updateCustomTypes,b=g.sort(function(e,n){return e.id.localeCompare(n.id)}),y=w.cd[d],C=u.$[d];return(o=(0,j.v9)(function(e){return{storeCustomTypes:(0,_.Ch)(e).filter(W.TG)}}).storeCustomTypes,(0,i.useEffect)(function(){var e=o.filter(function(e){return e.local.format===d});(e.length!==g.length||e.some(function(e){var n=g.find(function(n){return n.id===e.local.id});return!n||JSON.stringify(M.Dc.fromSM(e.local))!==JSON.stringify(n)}))&&v(e.map(function(e){var n=e.local;return M.Dc.fromSM(n)}))},[d,v,g,o]),0===b.length)?(0,t.jsxs)(E.R$,{"data-testid":"blank-slate",style:{alignSelf:"center",marginTop:a.rS.space[72]},children:[(0,t.jsx)(E.u2,{children:(0,t.jsx)(a.Ee,{src:y.blankSlateImage,sizing:"cover"})}),(0,t.jsxs)(E.T9,{children:[(0,t.jsx)(E._T,{children:C.name({start:!0,plural:!0})}),(0,t.jsx)(E.nf,{children:C.blankSlateDescription}),(0,t.jsx)(E.Qj,{children:(0,t.jsx)(a.zx,{onClick:x,loading:h,children:"Create"})})]})]}):(0,t.jsx)("div",{children:(0,t.jsxs)(a.iA,{columnLayout:"28px 1fr 1fr 1fr 42px",children:[(0,t.jsx)(a.ss,{children:(0,t.jsxs)(a.SC,{children:[(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.I5,{name:"notes",size:"medium"})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{color:"grey11",variant:"small",children:"Label"})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{color:"grey11",variant:"small",children:"API ID"})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{color:"grey11",variant:"small",children:"Limit"})}),(0,t.jsx)(a.pj,{})]})}),(0,t.jsx)(a.RM,{children:b.map(function(e){var n=e.repeatable,r=e.label,l=e.id;return(0,t.jsxs)(a.SC,{onClick:function(){p.push(w.cd[d].getBuilderPagePathname(l))},children:[(0,t.jsx)(a.pj,{children:n?(0,t.jsx)(P,{width:a.rS.space[20]}):(0,t.jsx)(V,{width:a.rS.space[20]})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{variant:"bold",noWrap:!0,children:r})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{color:"grey11",noWrap:!0,children:l})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)(a.xv,{color:"grey11",noWrap:!0,children:n?"Reusable":"Single"})}),(0,t.jsx)(a.pj,{children:(0,t.jsx)($._,{isChangesLocal:!1,format:d,customType:e})})]},l)})})]})})},Y=function(e){var n=e.format,r=u.$[n],l=(0,i.useState)(!1),h=l[0],x=l[1],p=(0,i.useState)(!1),f=p[0],m=p[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s(),{children:(0,t.jsxs)("title",{children:[r.name({start:!0,plural:!0})," - Slice Machine"]})}),(0,t.jsx)(o.S,{renderError:function(){return(0,t.jsx)(d.LN,{children:(0,t.jsx)(d.RN,{children:(0,t.jsx)(a.xu,{alignItems:"center",justifyContent:"center",children:(0,t.jsx)(a.Iq,{title:"Request failed",description:"An error occurred while fetching your ".concat(r.name({start:!1,plural:!0}),".")})})})})},children:(0,t.jsx)(i.Suspense,{fallback:(0,t.jsxs)(d.LN,{children:[(0,t.jsxs)(d.wd,{children:[(0,t.jsx)(d.Cx,{children:(0,t.jsx)(c.g,{children:r.name({start:!0,plural:!0})})}),(0,t.jsx)(d.K2,{children:(0,t.jsx)(a.zx,{disabled:!0,startIcon:"add",children:"Create"})})]}),(0,t.jsx)(d.RN,{children:(0,t.jsx)(a._3,{})})]}),children:(0,t.jsxs)(d.LN,{children:[(0,t.jsxs)(d.wd,{children:[(0,t.jsx)(d.Cx,{children:(0,t.jsx)(c.g,{children:r.name({start:!0,plural:!0})})}),(0,t.jsx)(d.K2,{children:(0,t.jsx)(a.zx,{"data-testid":"create-ct",loading:h,onClick:function(){m(!0)},startIcon:"add",children:"Create"})})]}),(0,t.jsx)(d.RN,{children:(0,t.jsxs)(a.xu,{flexDirection:"column",children:[(0,t.jsx)(K,{format:n,isCreatingCustomType:h,openCreateCustomTypeModal:function(){m(!0)}}),(0,t.jsx)(B,{format:n,isCreating:h,isOpen:f,onCreateChange:x,onOpenChange:m})]})})]})})})]})}},2978:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(62230),a=r(85244),l=r(98240),s=r(52322);r(2784);var i=r(75289),c=function(e){var n=e.bg,r=e.background,a=e.sx,l=e.withRadius,c=e.radius,o=e.children;return(0,s.jsx)(i.xu,{sx:(0,t.Z)({p:4,bg:n||r},l?{borderBottomLeftRadius:c,borderBottomRightRadius:c}:null,a),children:o})},o=function(e){var n=e.Header,r=void 0===n?null:n,o=e.SubHeader,u=void 0===o?null:o,d=e.Body,h=void 0===d?null:d,x=e.Footer,p=void 0===x?null:x,f=e.borderFooter,m=e.radius,j=void 0===m?"6px":m,g=e.bodySx,v=e.footerSx,b=e.sx,y=e.bg,C=e.background,S=e.children,w=(0,l.Z)(e,["Header","SubHeader","Body","Footer","borderFooter","radius","bodySx","footerSx","sx","bg","background","children"]);return(0,s.jsxs)(i.Zb,(0,a.Z)((0,t.Z)({sx:(0,t.Z)({border:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))},borderRadius:j},void 0===b?null:b)},w),{children:[r?(0,s.jsx)(r,{radius:j}):null,u?(0,s.jsx)(u,{radius:j}):null,(0,s.jsxs)(c,{bg:y,background:C,sx:void 0===g?{}:g,withRadius:!p,children:[h?(0,s.jsx)(h,{}):null,S||null]}),p?(0,s.jsx)(c,{bg:y,background:C,sx:(0,t.Z)({},void 0!==f&&f?{borderTop:function(e){var n=e.colors;return"1px solid ".concat(String(null==n?void 0:n.borders))}}:null,void 0===v?{}:v),radius:j,withRadius:!0,children:"object"==typeof p?p:(0,s.jsx)(p,{})}):null]}))}},25978:function(e,n,r){r.d(n,{Sn:function(){return i},lS:function(){return t},nG:function(){return a},pq:function(){return c},rd:function(){return s},xo:function(){return l}});var t=["components"],a=["png","jpg","jpeg"],l=/^[A-Za-z0-9]+(?:_[A-Za-z0-9]+)*$/,s="placeholders/What_are_Slices_mrvome",i="SM_HELP_VIDEOS/mock_data",c="slice-machine-simulator"}}]);